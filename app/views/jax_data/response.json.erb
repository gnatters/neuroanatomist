{
<% n = 0; @assets.each do |i, asset| n+=1; @asset = asset %>"<%= i %>":<%
  @cascade = asset.delete("cascade")
  case @asset.delete("t")
  when "error"%>{"type":"error", "message":"<%= @asset["message"] %>"}<% 
  when "m" %><%= @mesh = asset; render :partial => 'meshes/show.json' %><% 
  when "s" %><%= @shape = asset; render :partial => 'shapes/show.json' %><% 
  else %><%= render :partial => 'asset', :formats=>[:json] %><% end %><%= "," if n < @assets.length %>
<% end %>
}