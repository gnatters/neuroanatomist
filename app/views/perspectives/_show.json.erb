{ 
  "id":<%= @perspective.id or "null" %>,
  "name":"<%= @perspective.name %>"
  <% if [:yes,:partial].include? @cascade %>,
  "regions":[
    <% @perspective.region_styles.each_with_index do |region_style, i|
         next if region_style.orphaned
         @region = region_style.region
         @region.definition_for @shape_set %>
    <%= render :partial => 'regions/show.json' %><%= "," unless i == @perspective.regions.size-1 %>
    <% end %>
  ]
  <% end %>
}